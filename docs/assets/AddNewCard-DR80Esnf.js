import{r as A,g as G,c as R,j as s,T as $,u as I,a as B,B as k,y as O}from"./index-Bw4gxkGl.js";var z=A();const J=G(z),K="wrapper_5MXOr",Z="error_JNuld",S={wrapper:K,error:Z},V=t=>{const e=R.c(19),{label:r,value:o,onChange:c,type:u,name:f,placeholder:n,error:h,disabled:i}=t,a=u===void 0?"text":u;let m;e[0]!==r?(m=s.jsx($,{weight:"semibold",children:r}),e[0]=r,e[1]=m):m=e[1];let x;e[2]!==r||e[3]!==m?(x=s.jsx("label",{htmlFor:r,children:m}),e[2]=r,e[3]=m,e[4]=x):x=e[4];let l;e[5]!==i||e[6]!==r||e[7]!==f||e[8]!==c||e[9]!==n||e[10]!==a||e[11]!==o?(l=s.jsx("input",{id:r,type:a,value:o,onChange:c,placeholder:n,disabled:i,name:f}),e[5]=i,e[6]=r,e[7]=f,e[8]=c,e[9]=n,e[10]=a,e[11]=o,e[12]=l):l=e[12];let p;e[13]!==h?(p=h&&s.jsx($,{className:S.error,size:"small",children:h}),e[13]=h,e[14]=p):p=e[14];let v;return e[15]!==x||e[16]!==l||e[17]!==p?(v=s.jsxs("div",{className:S.wrapper,children:[x,l,p]}),e[15]=x,e[16]=l,e[17]=p,e[18]=v):v=e[18],v},q="overlay_Pxk0u",X="content_bZ4-D",Y="header_7udcB",H="close-button_NTCnn",Q="body_DVhzj",w={overlay:q,content:X,header:Y,closeButton:H,body:Q},U=t=>{const e=R.c(16),{children:r,isOpen:o,onClose:c,title:u}=t;if(!o)return null;let f;if(e[0]!==r||e[1]!==c||e[2]!==u){let n;e[4]!==u?(n=s.jsx("h2",{children:u}),e[4]=u,e[5]=n):n=e[5];let h;e[6]!==c?(h=s.jsx("button",{className:w.closeButton,onClick:c,children:"Ã—"}),e[6]=c,e[7]=h):h=e[7];let i;e[8]!==n||e[9]!==h?(i=s.jsxs("header",{className:w.header,children:[n,h]}),e[8]=n,e[9]=h,e[10]=i):i=e[10];let a;e[11]!==r?(a=s.jsx("div",{className:w.body,children:r}),e[11]=r,e[12]=a):a=e[12];let m;e[13]!==i||e[14]!==a?(m=s.jsx("div",{className:w.overlay,children:s.jsxs("div",{className:w.content,children:[i,a]})}),e[13]=i,e[14]=a,e[15]=m):m=e[15],f=J.createPortal(m,document.getElementById("modal-root")),e[0]=r,e[1]=c,e[2]=u,e[3]=f}else f=e[3];return f};function E(t=""){return t.replace(/\D+/g,"")}function F(t){if(!t)return t;const e=E(t);return[e.slice(0,4),e.slice(4,8),e.slice(8,12),e.slice(12,16)].join(" ").trim()}function W(t){return E(t).slice(0,3)}function L(t){const e=E(t);return e.length>=3?`${e.slice(0,2)}/${e.slice(2,4)}`:e}const T=t=>{let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return e},ee=()=>`0${Math.floor(Math.random()*8)+1}/${Math.floor(Math.random()*10)+24}`,te=()=>{var t=["Flying","Soar","Soaring","Power","Falling","Fall","Jump","Cliff","Mountain","Rend","Red","Blue","Green","Yellow","Gold","Demon","Demonic","Panda","Cat","Kitty","Kitten","Zero","Memory","Trooper","Router","Bandit","Fear","Light","Glow","Tread","Deep","Deeper","Deepest"];return`${t[Math.floor(Math.random()*t.length)]} ${t[Math.floor(Math.random()*t.length)]}`},re=t=>{const e={number:"",name:"",expiry:"",cvv:""};let r=!0;E(t.number).length!==16&&(e.number="Card number is invalid",r=!1);const o=t.name.trim().length;return(o<3||o>50)&&(e.name="Enter name between 3 and 50 characters",r=!1),/^(0[1-9]|1[0-2])\/?([0-9]{2})$/.test(t.expiry)||(e.expiry="Expiry date is invalid",r=!1),E(t.cvv).length!==3&&(e.cvv="CVV is invalid",r=!1),[r,e]},se=t=>{const e=R.c(39),{isOpen:r,close:o}=t,{addNewCard:c,loading:u}=I();let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={number:F(T(16)),name:te(),expiry:L(ee()),cvv:T(3)},e[0]=f):f=e[0];const[n,h]=B.useState(f);let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i={number:"",name:"",expiry:"",cvv:""},e[1]=i):i=e[1];const[a,m]=B.useState(i);let x;e[2]!==n||e[3]!==a?(x=_=>{const d=_.target;d.name==="number"?d.value=F(d.value):d.name==="expiry"?d.value=L(d.value):d.name==="cvv"&&(d.value=W(d.value)),m({...a,[d.name]:""}),h({...n,[d.name]:d.value})},e[2]=n,e[3]=a,e[4]=x):x=e[4];const l=x;let p;e[5]!==c||e[6]!==n||e[7]!==o?(p=_=>{_.preventDefault();const[d,P]=re(n);if(!d){m(P);return}c(n).then(ne).catch(ae).finally(o)},e[5]=c,e[6]=n,e[7]=o,e[8]=p):p=e[8];const v=p;let b;e[9]!==n.name||e[10]!==a.name||e[11]!==l?(b=s.jsx(V,{label:"Name on card",name:"name",onChange:l,value:n.name,error:a.name}),e[9]=n.name,e[10]=a.name,e[11]=l,e[12]=b):b=e[12];let y;e[13]!==n.number||e[14]!==a.number||e[15]!==l?(y=s.jsx(V,{label:"Card number",name:"number",onChange:l,value:n.number,error:a.number}),e[13]=n.number,e[14]=a.number,e[15]=l,e[16]=y):y=e[16];let g;e[17]!==n.expiry||e[18]!==a.expiry||e[19]!==l?(g=s.jsx(V,{label:"Expiry",name:"expiry",onChange:l,value:n.expiry,error:a.expiry}),e[17]=n.expiry,e[18]=a.expiry,e[19]=l,e[20]=g):g=e[20];let C;e[21]!==n.cvv||e[22]!==a.cvv||e[23]!==l?(C=s.jsx(V,{label:"CVV",name:"cvv",onChange:l,value:n.cvv,error:a.cvv}),e[21]=n.cvv,e[22]=a.cvv,e[23]=l,e[24]=C):C=e[24];const D=u?"Loading...":"Add Card";let j;e[25]!==u||e[26]!==D?(j=s.jsx(k,{text:D,disabled:u,type:"submit"}),e[25]=u,e[26]=D,e[27]=j):j=e[27];let N;e[28]!==v||e[29]!==j||e[30]!==b||e[31]!==y||e[32]!==g||e[33]!==C?(N=s.jsxs("form",{onSubmit:v,children:[b,y,g,C,j]}),e[28]=v,e[29]=j,e[30]=b,e[31]=y,e[32]=g,e[33]=C,e[34]=N):N=e[34];let M;return e[35]!==o||e[36]!==r||e[37]!==N?(M=s.jsx(U,{title:"Add new Card",isOpen:r,onClose:o,children:N}),e[35]=o,e[36]=r,e[37]=N,e[38]=M):M=e[38],M};function ne(){O.success("New Card has been added succesfully")}function ae(t){console.error(t),O.error(t?.message||"Error adding new card")}export{se as default};
